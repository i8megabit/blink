[tool:pytest]
# Основные настройки pytest
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*
addopts = 
    -v
    --tb=short
    --strict-markers
    --disable-warnings
    --color=yes
    --durations=10
    --cov=app
    --cov-report=term-missing
    --cov-report=html:htmlcov
    --cov-report=xml
    --cov-fail-under=80

# Маркеры для категоризации тестов
markers =
    unit: Unit тесты
    integration: Integration тесты
    performance: Performance тесты
    slow: Медленные тесты
    api: API тесты
    database: Тесты базы данных
    async: Асинхронные тесты
    smoke: Smoke тесты
    regression: Regression тесты

# Фильтры для исключения тестов
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning

# Настройки для coverage
[coverage:run]
source = app
omit = 
    */tests/*
    */__pycache__/*
    */migrations/*
    */venv/*
    */env/*

[coverage:report]
exclude_lines =
    pragma: no cover
    def __repr__
    if self.debug:
    if settings.DEBUG
    raise AssertionError
    raise NotImplementedError
    if 0:
    if __name__ == .__main__.:
    class .*\bProtocol\):
    @(abc\.)?abstractmethod

# Настройки для asyncio
asyncio_mode = auto

# Настройки для параллельного выполнения
addopts = 
    -n auto
    --dist=loadfile

# Настройки для отчетов
addopts = 
    --html=reports/pytest_report.html
    --self-contained-html
    --junitxml=reports/junit.xml

# Настройки для логирования
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Настройки для фикстур
addopts = 
    --reuse-db
    --create-db

# Настройки для моков
addopts = 
    --mock-use-standalone-module

# Настройки для профилирования
addopts = 
    --profile
    --profile-svg

# Настройки для отладки
addopts = 
    --pdb
    --pdbcls=IPython.terminal.debugger:Pdb

# Настройки для кэширования
addopts = 
    --cache-clear
    --cache-show

# Настройки для повторного запуска
addopts = 
    --lf
    --ff
    --nf

# Настройки для остановки при ошибке
addopts = 
    -x
    --maxfail=10

# Настройки для вывода
addopts = 
    -s
    --capture=no
    --showlocals

# Настройки для таймаутов
addopts = 
    --timeout=300
    --timeout-method=thread

# Настройки для изоляции
addopts = 
    --isolated
    --forked

# Настройки для плагинов
addopts = 
    --strict-config
    --strict-markers
    --disable-warnings

# Настройки для отчетов о производительности
addopts = 
    --benchmark-only
    --benchmark-skip
    --benchmark-min-rounds=100

# Настройки для метрик
addopts = 
    --metrics
    --metrics-format=json

# Настройки для безопасности
addopts = 
    --security-check
    --bandit

# Настройки для документации
addopts = 
    --doctest-modules
    --doctest-report=udiff

# Настройки для совместимости
addopts = 
    --compat-mode
    --legacy-mode

# Настройки для CI/CD
addopts = 
    --junitxml=test-results.xml
    --cov-report=xml:coverage.xml
    --cov-report=html:coverage-html

# Настройки для локальной разработки
addopts = 
    --reuse-db
    --nomigrations
    --keepdb

# Настройки для продакшена
addopts = 
    --no-cov
    --no-html
    --no-xml
    --quiet 