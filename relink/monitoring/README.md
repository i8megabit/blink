# ๐ ะะธะบัะพัะตัะฒะธั ะะพะฝะธัะพัะธะฝะณะฐ reLink

ะะพัะฝัะน, ะปะตะณะบะธะน ะธ ะฑัััััะน ะผะธะบัะพัะตัะฒะธั ะผะพะฝะธัะพัะธะฝะณะฐ ะดะปั ะฟะปะฐััะพัะผั reLink. ะัะตะดะพััะฐะฒะปัะตั ะบะพะผะฟะปะตะบัะฝัะน ะผะพะฝะธัะพัะธะฝะณ ะฒัะตั ะบะพะผะฟะพะฝะตะฝัะพะฒ ัะธััะตะผั ั ะฑะพะณะฐัะพะน ะผะตััะธะบะพะน ะธ ัะตะฐะปัะฝัะผ ะฒัะตะผะตะฝะตะผ.

## ๐ ะะพะทะผะพะถะฝะพััะธ

### ๐ ะกะฑะพั ะผะตััะธะบ
- **ะกะธััะตะผะฝัะต ะผะตััะธะบะธ**: CPU, ะฟะฐะผััั, ะดะธัะบ, ัะตัั, ะฝะฐะณััะทะบะฐ
- **ะะฐะทะฐ ะดะฐะฝะฝัั**: ะฟะพะดะบะปััะตะฝะธั, ะทะฐะฟัะพัั, ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััั
- **ะะตั Redis**: hit rate, ะฟะฐะผััั, ะพะฟะตัะฐัะธะธ
- **Ollama LLM**: ะผะพะดะตะปะธ, ะฒัะตะผั ะพัะฒะตัะฐ, ัะพะบะตะฝั/ัะตะบ
- **HTTP ะผะตััะธะบะธ**: ะทะฐะฟัะพัั, ะพัะฒะตัั, ะพัะธะฑะบะธ

### ๐จ ะกะธััะตะผะฐ ะฐะปะตััะพะฒ
- ะะฒัะพะผะฐัะธัะตัะบะพะต ะพะฑะฝะฐััะถะตะฝะธะต ะฟัะพะฑะปะตะผ
- ะะฐัััะฐะธะฒะฐะตะผัะต ะฟะพัะพะณะธ ะดะปั ะฒัะตั ะผะตััะธะบ
- ะะฐะทะปะธัะฝัะต ััะพะฒะฝะธ ะฒะฐะถะฝะพััะธ (INFO, WARNING, ERROR, CRITICAL)
- ะฃะฟัะฐะฒะปะตะฝะธะต ััะฐัััะฐะผะธ ะฐะปะตััะพะฒ (ะฐะบัะธะฒะฝัะน, ัะฐะทัะตัะตะฝะฝัะน, ะฟะพะดัะฒะตัะถะดะตะฝะฝัะน)

### ๐ฅ ะัะพะฒะตัะบะฐ ะทะดะพัะพะฒัั
- ะะพะฝะธัะพัะธะฝะณ ะฒัะตั ัะตัะฒะธัะพะฒ ัะธััะตะผั
- ะะฒัะพะผะฐัะธัะตัะบะธะต ะฟัะพะฒะตัะบะธ ะดะพัััะฟะฝะพััะธ
- ะะตัะฐะปัะฝะฐั ะดะธะฐะณะฝะพััะธะบะฐ ะบะพะผะฟะพะฝะตะฝัะพะฒ
- ะกัะฐัััั: HEALTHY, DEGRADED, DOWN

### ๐ ะะฐัะฑะพัะด
- ะะตะฐะปัะฝะพะต ะฒัะตะผั ะพะฑะฝะพะฒะปะตะฝะธั ะดะฐะฝะฝัั
- ะะฝัะตะณัะฐัะธั ั ััะพะฝัะตะฝะดะพะผ
- ะััะพัะธัะตัะบะธะต ะดะฐะฝะฝัะต
- ะะธะทัะฐะปะธะทะฐัะธั ััะตะฝะดะพะฒ

## ๐๏ธ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ   Frontend      โ    โ   Monitoring    โ    โ   Redis Cache   โ
โ   (React)       โโโโโบโ   Service       โโโโโบโ   (Metrics)     โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
                              โ
                              โผ
                       โโโโโโโโโโโโโโโโโโโ
                       โ   PostgreSQL    โ
                       โ   (History)     โ
                       โโโโโโโโโโโโโโโโโโโ
```

## ๐๏ธ ะขะตัะฝะพะปะพะณะธัะตัะบะธะน ััะตะบ

- **FastAPI** - ัะพะฒัะตะผะตะฝะฝัะน ะฒะตะฑ-ััะตะนะผะฒะพัะบ
- **Redis** - ะบะตัะธัะพะฒะฐะฝะธะต ะธ ััะฐะฝะตะฝะธะต ะผะตััะธะบ
- **PostgreSQL** - ะดะพะปะณะพััะพัะฝะพะต ััะฐะฝะตะฝะธะต ะดะฐะฝะฝัั
- **SQLAlchemy** - ORM ะดะปั ัะฐะฑะพัั ั ะะ
- **psutil** - ัะธััะตะผะฝัะต ะผะตััะธะบะธ
- **aiohttp** - ะฐัะธะฝััะพะฝะฝัะต HTTP ะทะฐะฟัะพัั
- **Pydantic** - ะฒะฐะปะธะดะฐัะธั ะดะฐะฝะฝัั
- **Prometheus** - ัะบัะฟะพัั ะผะตััะธะบ

## ๐ฆ ะฃััะฐะฝะพะฒะบะฐ ะธ ะทะฐะฟััะบ

### ะะพะบะฐะปัะฝะฐั ัะฐะทัะฐะฑะพัะบะฐ

```bash
# ะะปะพะฝะธัะพะฒะฐะฝะธะต ัะตะฟะพะทะธัะพัะธั
git clone <repository>
cd relink/monitoring

# ะกะพะทะดะฐะฝะธะต ะฒะธัััะฐะปัะฝะพะณะพ ะพะบััะถะตะฝะธั
python -m venv venv
source venv/bin/activate  # Linux/Mac
# ะธะปะธ
venv\Scripts\activate  # Windows

# ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน
pip install -r requirements.txt

# ะะฐัััะพะนะบะฐ ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั
cp .env.example .env
# ะััะตะดะฐะบัะธััะนัะต .env ัะฐะนะป

# ะะฐะฟััะบ ัะตัะฒะธัะฐ
uvicorn app.main:app --host 0.0.0.0 --port 8002 --reload
```

### Docker

```bash
# ะกะฑะพัะบะฐ ะพะฑัะฐะทะฐ
docker build -t relink-monitoring .

# ะะฐะฟััะบ ะบะพะฝัะตะนะฝะตัะฐ
docker run -d \
  --name monitoring \
  -p 8002:8002 \
  -e DATABASE_URL=postgresql+asyncpg://user:pass@host:5432/db \
  -e REDIS_HOST=redis \
  -e OLLAMA_URL=http://ollama:11434 \
  relink-monitoring
```

### Docker Compose

```bash
# ะะฐะฟััะบ ะฒัะตั ัะตัะฒะธัะพะฒ
docker-compose up -d

# ะัะพัะผะพัั ะปะพะณะพะฒ
docker-compose logs -f monitoring
```

## ๐ง ะะพะฝัะธะณััะฐัะธั

### ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั

| ะะตัะตะผะตะฝะฝะฐั | ะะฟะธัะฐะฝะธะต | ะะพ ัะผะพะปัะฐะฝะธั |
|------------|----------|--------------|
| `DATABASE_URL` | URL ะฟะพะดะบะปััะตะฝะธั ะบ PostgreSQL | `postgresql+asyncpg://seo_user:seo_pass@db:5432/seo_db` |
| `REDIS_HOST` | ะฅะพัั Redis | `redis` |
| `REDIS_PORT` | ะะพัั Redis | `6379` |
| `OLLAMA_URL` | URL Ollama API | `http://ollama:11434` |
| `COLLECT_INTERVAL` | ะะฝัะตัะฒะฐะป ัะฑะพัะฐ ะผะตััะธะบ (ัะตะบ) | `30` |
| `RETENTION_DAYS` | ะะฝะธ ััะฐะฝะตะฝะธั ะดะฐะฝะฝัั | `30` |
| `LOG_LEVEL` | ะฃัะพะฒะตะฝั ะปะพะณะธัะพะฒะฐะฝะธั | `INFO` |
| `CORS_ORIGINS` | ะะฐะทัะตัะตะฝะฝัะต CORS ะธััะพัะฝะธะบะธ | `["http://localhost:3000"]` |

### ะะพัะพะณะธ ะฐะปะตััะพะฒ

```python
ALERT_THRESHOLDS = {
    "cpu_usage": 80.0,      # CPU > 80%
    "memory_usage": 85.0,   # ะะฐะผััั > 85%
    "disk_usage": 90.0,     # ะะธัะบ > 90%
    "response_time": 2.0,   # ะัะตะผั ะพัะฒะตัะฐ > 2ั
    "error_rate": 5.0       # ะัะธะฑะบะธ > 5%
}
```

## ๐ก API Endpoints

### ะัะฝะพะฒะฝัะต ัะฝะดะฟะพะธะฝัั

| ะะตัะพะด | ะััั | ะะฟะธัะฐะฝะธะต |
|-------|------|----------|
| `GET` | `/` | ะะฝัะพัะผะฐัะธั ะพ ัะตัะฒะธัะต |
| `GET` | `/health` | ะัะพะฒะตัะบะฐ ะทะดะพัะพะฒัั |
| `GET` | `/metrics` | ะขะตะบััะธะต ะผะตััะธะบะธ |
| `GET` | `/metrics/history` | ะััะพัะธั ะผะตััะธะบ |
| `GET` | `/alerts` | ะกะฟะธัะพะบ ะฐะปะตััะพะฒ |
| `POST` | `/alerts` | ะกะพะทะดะฐะฝะธะต ะฐะปะตััะฐ |
| `PUT` | `/alerts/{id}` | ะะฑะฝะพะฒะปะตะฝะธะต ะฐะปะตััะฐ |
| `GET` | `/services` | ะกัะฐััั ัะตัะฒะธัะพะฒ |
| `GET` | `/dashboard` | ะะฐะฝะฝัะต ะดะฐัะฑะพัะดะฐ |
| `POST` | `/metrics/collect` | ะัะธะฝัะดะธัะตะปัะฝัะน ัะฑะพั ะผะตััะธะบ |
| `GET` | `/prometheus` | Prometheus ะผะตััะธะบะธ |

### ะัะธะผะตัั ะทะฐะฟัะพัะพะฒ

```bash
# ะะพะปััะตะฝะธะต ะผะตััะธะบ
curl http://localhost:8002/metrics

# ะะพะปััะตะฝะธะต ะฐะปะตััะพะฒ
curl http://localhost:8002/alerts

# ะัะพะฒะตัะบะฐ ะทะดะพัะพะฒัั
curl http://localhost:8002/health

# ะกะพะทะดะฐะฝะธะต ะฐะปะตััะฐ
curl -X POST http://localhost:8002/alerts \
  -H "Content-Type: application/json" \
  -d '{
    "name": "High CPU Usage",
    "description": "CPU usage is 85%",
    "severity": "warning",
    "source": "system",
    "metric_name": "cpu_usage",
    "threshold": 80.0,
    "current_value": 85.0
  }'
```

## ๐ ะะตััะธะบะธ

### ะกะธััะตะผะฝัะต ะผะตััะธะบะธ
- `cpu_usage` - ะัะฟะพะปัะทะพะฒะฐะฝะธะต CPU (%)
- `memory_usage` - ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะฟะฐะผััะธ (%)
- `disk_usage` - ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะดะธัะบะฐ (%)
- `network_in/out` - ะกะตัะตะฒะพะน ััะฐัะธะบ (ะฑะฐะนั/ั)
- `load_average` - ะกัะตะดะฝัั ะฝะฐะณััะทะบะฐ ัะธััะตะผั

### ะะตััะธะบะธ ะฑะฐะทั ะดะฐะฝะฝัั
- `active_connections` - ะะบัะธะฒะฝัะต ะฟะพะดะบะปััะตะฝะธั
- `total_connections` - ะะฑัะตะต ะบะพะปะธัะตััะฒะพ ะฟะพะดะบะปััะตะฝะธะน
- `query_time` - ะัะตะผั ะฒัะฟะพะปะฝะตะฝะธั ะทะฐะฟัะพัะพะฒ
- `slow_queries` - ะะพะปะธัะตััะฒะพ ะผะตะดะปะตะฝะฝัั ะทะฐะฟัะพัะพะฒ
- `errors` - ะะพะปะธัะตััะฒะพ ะพัะธะฑะพะบ

### ะะตััะธะบะธ ะบะตัะฐ
- `hit_rate` - ะัะพัะตะฝั ะฟะพะฟะฐะดะฐะฝะธะน ะฒ ะบะตั
- `miss_rate` - ะัะพัะตะฝั ะฟัะพะผะฐัะพะฒ ะบะตัะฐ
- `memory_usage` - ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะฟะฐะผััะธ ะบะตัะฐ
- `keys_count` - ะะพะปะธัะตััะฒะพ ะบะปััะตะน
- `evictions` - ะะพะปะธัะตััะฒะพ ะฒััะตัะฝะตะฝะธะน

### ะะตััะธะบะธ Ollama
- `model` - ะะฐะทะฒะฐะฝะธะต ะผะพะดะตะปะธ
- `response_time` - ะัะตะผั ะพัะฒะตัะฐ (ัะตะบ)
- `tokens_per_second` - ะขะพะบะตะฝะพะฒ ะฒ ัะตะบัะฝะดั
- `memory_usage` - ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะฟะฐะผััะธ ะผะพะดะตะปะธ
- `requests_per_minute` - ะะฐะฟัะพัะพะฒ ะฒ ะผะธะฝััั
- `errors` - ะะพะปะธัะตััะฒะพ ะพัะธะฑะพะบ

## ๐จ ะะปะตััั

### ะฃัะพะฒะฝะธ ะฒะฐะถะฝะพััะธ
- **INFO** - ะะฝัะพัะผะฐัะธะพะฝะฝัะต ัะพะพะฑัะตะฝะธั
- **WARNING** - ะัะตะดัะฟัะตะถะดะตะฝะธั
- **ERROR** - ะัะธะฑะบะธ
- **CRITICAL** - ะัะธัะธัะตัะบะธะต ะฟัะพะฑะปะตะผั

### ะกัะฐัััั ะฐะปะตััะพะฒ
- **ACTIVE** - ะะบัะธะฒะฝัะน ะฐะปะตัั
- **RESOLVED** - ะะฐะทัะตัะตะฝะฝัะน ะฐะปะตัั
- **ACKNOWLEDGED** - ะะพะดัะฒะตัะถะดะตะฝะฝัะน ะฐะปะตัั

### ะะฒัะพะผะฐัะธัะตัะบะธะต ะฐะปะตััั
- ะััะพะบะพะต ะธัะฟะพะปัะทะพะฒะฐะฝะธะต CPU (>80%)
- ะััะพะบะพะต ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ะฟะฐะผััะธ (>85%)
- ะััะพะบะพะต ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ะดะธัะบะฐ (>90%)
- ะะตะดะปะตะฝะฝัะต ะทะฐะฟัะพัั ะบ ะะ (>2ั)
- ะะธะทะบะธะน hit rate ะบะตัะฐ (<80%)
- ะัะธะฑะบะธ Ollama

## ๐ ะะพะฝะธัะพัะธะฝะณ

### ะัะพะฒะตัะบะฐ ะทะดะพัะพะฒัั ัะตัะฒะธัะพะฒ
- **PostgreSQL** - ะฟะพะดะบะปััะตะฝะธะต ะธ ะฒัะฟะพะปะฝะตะฝะธะต ะทะฐะฟัะพัะพะฒ
- **Redis** - ping ะธ ะฑะฐะทะพะฒัะต ะพะฟะตัะฐัะธะธ
- **Ollama** - ะฟัะพะฒะตัะบะฐ API ะธ ะผะพะดะตะปะตะน

### ะะพะณะธัะพะฒะฐะฝะธะต
- ะกัััะบัััะธัะพะฒะฐะฝะฝัะต ะปะพะณะธ ะฒ JSON ัะพัะผะฐัะต
- ะะฐะทะปะธัะฝัะต ััะพะฒะฝะธ ะปะพะณะธัะพะฒะฐะฝะธั
- ะะพัะฐัะธั ะปะพะณะพะฒ
- ะฆะตะฝััะฐะปะธะทะพะฒะฐะฝะฝัะน ัะฑะพั ะปะพะณะพะฒ

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต

```bash
# ะะฐะฟััะบ ัะตััะพะฒ
pytest

# ะะฐะฟััะบ ั ะฟะพะบัััะธะตะผ
pytest --cov=app

# ะะฐะฟััะบ ะบะพะฝะบัะตัะฝะพะณะพ ัะตััะฐ
pytest tests/test_metrics.py::test_system_metrics
```

## ๐ ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั

### ะะฟัะธะผะธะทะฐัะธะธ
- ะัะธะฝััะพะฝะฝะฐั ะพะฑัะฐะฑะพัะบะฐ ะทะฐะฟัะพัะพะฒ
- ะะตัะธัะพะฒะฐะฝะธะต ะผะตััะธะบ ะฒ Redis
- ะะตัะธะพะดะธัะตัะบะธะน ัะฑะพั ะผะตััะธะบ
- ะญััะตะบัะธะฒะฝัะต SQL ะทะฐะฟัะพัั
- ะกะถะฐัะธะต ะดะฐะฝะฝัั

### ะะตััะธะบะธ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ
- ะัะตะผั ะพัะฒะตัะฐ API < 100ms
- ะะพััะตะฑะปะตะฝะธะต ะฟะฐะผััะธ < 100MB
- CPU ะธัะฟะพะปัะทะพะฒะฐะฝะธะต < 10%
- ะะพัััะฟะฝะพััั > 99.9%

## ๐ ะะตะทะพะฟะฐัะฝะพััั

- ะะฐะปะธะดะฐัะธั ะฒัะตั ะฒัะพะดะฝัั ะดะฐะฝะฝัั
- CORS ะฝะฐัััะพะนะบะธ
- Rate limiting
- ะะพะณะธัะพะฒะฐะฝะธะต ะฑะตะทะพะฟะฐัะฝะพััะธ
- ะะตะทะพะฟะฐัะฝัะต ะฟะพะดะบะปััะตะฝะธั ะบ ะะ

## ๐ค ะะฝัะตะณัะฐัะธั

### ะก ััะพะฝัะตะฝะดะพะผ
- REST API ะดะปั ะฟะพะปััะตะฝะธั ะดะฐะฝะฝัั
- WebSocket ะดะปั real-time ะพะฑะฝะพะฒะปะตะฝะธะน
- CORS ะฝะฐัััะพะนะบะธ ะดะปั ะบัะพัั-ะดะพะผะตะฝะฝัั ะทะฐะฟัะพัะพะฒ

### ะก ะดััะณะธะผะธ ัะตัะฒะธัะฐะผะธ
- Prometheus ะดะปั ัะบัะฟะพััะฐ ะผะตััะธะบ
- Grafana ะดะปั ะฒะธะทัะฐะปะธะทะฐัะธะธ
- AlertManager ะดะปั ัะฒะตะดะพะผะปะตะฝะธะน
- ELK Stack ะดะปั ะปะพะณะพะฒ

## ๐ ะะฐะทัะฐะฑะพัะบะฐ

### ะกัััะบัััะฐ ะฟัะพะตะบัะฐ
```
monitoring/
โโโ app/
โ   โโโ __init__.py
โ   โโโ main.py          # ะัะฝะพะฒะฝะพะต ะฟัะธะปะพะถะตะฝะธะต
โ   โโโ config.py        # ะะพะฝัะธะณััะฐัะธั
โ   โโโ models.py        # Pydantic ะผะพะดะตะปะธ
โ   โโโ services.py      # ะะธะทะฝะตั-ะปะพะณะธะบะฐ
โโโ tests/               # ะขะตััั
โโโ Dockerfile           # Docker ะพะฑัะฐะท
โโโ requirements.txt     # ะะฐะฒะธัะธะผะพััะธ
โโโ README.md           # ะะพะบัะผะตะฝัะฐัะธั
```

### ะะพะฑะฐะฒะปะตะฝะธะต ะฝะพะฒัั ะผะตััะธะบ
1. ะกะพะทะดะฐัั ะผะพะดะตะปั ะฒ `models.py`
2. ะะพะฑะฐะฒะธัั ะผะตัะพะด ัะฑะพัะฐ ะฒ `MetricsCollector`
3. ะะฑะฝะพะฒะธัั API ัะฝะดะฟะพะธะฝัั
4. ะะพะฑะฐะฒะธัั ัะตััั

### ะะพะฑะฐะฒะปะตะฝะธะต ะฝะพะฒัั ะฐะปะตััะพะฒ
1. ะะฟัะตะดะตะปะธัั ะฟะพัะพะณะพะฒัะต ะทะฝะฐัะตะฝะธั ะฒ ะบะพะฝัะธะณััะฐัะธะธ
2. ะะพะฑะฐะฒะธัั ะฟัะพะฒะตัะบั ะฒ `AlertService`
3. ะกะพะทะดะฐัั ัะพะพัะฒะตัััะฒัััะธะต ะฐะปะตััั
4. ะัะพัะตััะธัะพะฒะฐัั ะปะพะณะธะบั

## ๐ ะะฐะทะฒะตัััะฒะฐะฝะธะต

### Production
```bash
# ะกะฑะพัะบะฐ production ะพะฑัะฐะทะฐ
docker build -t relink-monitoring:prod .

# ะะฐะฟััะบ ั production ะฝะฐัััะพะนะบะฐะผะธ
docker run -d \
  --name monitoring-prod \
  -p 8002:8002 \
  -e ENVIRONMENT=production \
  -e LOG_LEVEL=WARNING \
  relink-monitoring:prod
```

### ะะพะฝะธัะพัะธะฝะณ ะฒ production
- Health checks ะบะฐะถะดัะต 30 ัะตะบัะฝะด
- ะะฒัะพะผะฐัะธัะตัะบะธะน restart ะฟัะธ ัะฑะพัั
- ะะพะณะธัะพะฒะฐะฝะธะต ะฒ stdout/stderr
- ะะตััะธะบะธ ะฒ Prometheus ัะพัะผะฐัะต

## ๐ ะะพะดะดะตัะถะบะฐ

- ะะพะบัะผะตะฝัะฐัะธั API: `http://localhost:8002/docs`
- ReDoc: `http://localhost:8002/redoc`
- Health check: `http://localhost:8002/health`
- Prometheus metrics: `http://localhost:8002/prometheus`

## ๐ ะะธัะตะฝะทะธั

MIT License - ัะผ. ัะฐะนะป LICENSE ะฒ ะบะพัะฝะต ะฟัะพะตะบัะฐ. 