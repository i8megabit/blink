# üöÄ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º reLink

## üìã –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π reLink –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è —Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:

1. **üß† –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —Ä–æ—É—Ç–µ—Ä –º–æ–¥–µ–ª–µ–π** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏ Qwen
2. **üóÑÔ∏è –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —Å–µ—Ä–≤–∏—Å ChromaDB** - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –ø–æ–∏—Å–∫
3. **‚öôÔ∏è –ú–µ–Ω–µ–¥–∂–µ—Ä –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π** - —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ–º–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏

## üß† –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —Ä–æ—É—Ç–µ—Ä –º–æ–¥–µ–ª–µ–π

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –º–æ–¥–µ–ª–∏** –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∑–∞–¥–∞—á–∏
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤** —Å–∏—Å—Ç–µ–º—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** —Å —É—á–µ—Ç–æ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **Fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã** –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –º–æ–¥–µ–ª–µ–π

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –º–æ–¥–µ–ª–∏

| –ú–æ–¥–µ–ª—å | –¢–∏–ø | –†–∞–∑–º–µ—Ä | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ |
|--------|-----|--------|------------|--------------|
| qwen2.5:0.5b | FAST_RESPONSE | 0.5B | –ë—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã | ~2 —Å–µ–∫ |
| qwen2.5:1.5b | HIGH_QUALITY | 1.5B | –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ | ~5 —Å–µ–∫ |
| qwen2.5:3b | CODE_GENERATION | 3B | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ | ~8 —Å–µ–∫ |
| qwen2.5:7b | ANALYSIS | 7B | –ê–Ω–∞–ª–∏–∑ –∏ —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—è | ~15 —Å–µ–∫ |
| qwen2.5:14b | EXPERT | 14B | –≠–∫—Å–ø–µ—Ä—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏ | ~30 —Å–µ–∫ |

### –£—Ä–æ–≤–Ω–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∑–∞–¥–∞—á

- **SIMPLE** - –ø—Ä–æ—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã (< 20 —Å–ª–æ–≤)
- **MEDIUM** - —Å—Ä–µ–¥–Ω—è—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å (20-100 —Å–ª–æ–≤)
- **COMPLEX** - —Å–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏ (100-300 —Å–ª–æ–≤)
- **EXPERT** - —ç–∫—Å–ø–µ—Ä—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å (> 300 —Å–ª–æ–≤)

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```python
from app.llm.intelligent_model_router import IntelligentModelRouter

# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–æ—É—Ç–µ—Ä–∞
router = IntelligentModelRouter()

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞
result = await router.route_request(
    prompt="–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã",
    context="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç",
    preferred_model=None  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä
)

print(f"–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –º–æ–¥–µ–ª—å: {result['model_used']}")
print(f"–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: {result['response_time']:.2f} —Å–µ–∫")
```

## üóÑÔ∏è –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —Å–µ—Ä–≤–∏—Å ChromaDB

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ** –∫–æ–ª–ª–µ–∫—Ü–∏–π
- **–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å Redis –∏ –ª–æ–∫–∞–ª—å–Ω—ã–º –∫–µ—à–µ–º
- **–ö–æ–º–ø—Ä–µ—Å—Å–∏—è –¥–∞–Ω–Ω—ã—Ö** –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```python
from app.llm.advanced_chromadb_service import AdvancedChromaDBService

service = AdvancedChromaDBService(
    persist_directory="./chroma_db",
    redis_url="redis://localhost:6379",
    max_cache_size=1000,
    enable_compression=True,
    enable_sharding=True,
    shard_size_threshold=50000
)
```

### –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏

```python
# –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
collection = await service.create_collection("my_collection")

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
ids = await service.add_documents(
    collection_name="my_collection",
    documents=["–î–æ–∫—É–º–µ–Ω—Ç 1", "–î–æ–∫—É–º–µ–Ω—Ç 2"],
    metadatas=[{"type": "text"}, {"type": "code"}]
)

# –ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
results = await service.query(
    collection_name="my_collection",
    query_texts=["–ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å"],
    n_results=10
)
```

### –®–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç —à–∞—Ä–¥—ã –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ø–æ—Ä–æ–≥–∞ –≤ 50,000 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ** –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–æ —à–∞—Ä–¥–∞–º
- **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** –∫ —à–∞—Ä–¥–∞–º
- **–û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** —Å —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ–º

## ‚öôÔ∏è –ú–µ–Ω–µ–¥–∂–µ—Ä –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π

### –£—Ä–æ–≤–Ω–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

- **BASIC** - –±–∞–∑–æ–≤–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (1 –º–æ–¥–µ–ª—å)
- **STANDARD** - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (2 –º–æ–¥–µ–ª–∏)
- **ADVANCED** - –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (3 –º–æ–¥–µ–ª–∏)
- **EXPERT** - —ç–∫—Å–ø–µ—Ä—Ç–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (4 –º–æ–¥–µ–ª–∏)

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

```python
from app.llm.optimization_manager import OptimizationManager, OptimizationLevel

manager = OptimizationManager(
    optimization_level=OptimizationLevel.ADVANCED,
    auto_optimize=True,
    optimization_interval=300  # 5 –º–∏–Ω—É—Ç
)

# –ó–∞–ø—É—Å–∫ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
await manager.start()
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤

```python
# –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å ChromaDB –∏ LLM
result = await manager.process_request(
    prompt="–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏",
    context="–ö–æ–Ω—Ç–µ–∫—Å—Ç —Å–∏—Å—Ç–µ–º—ã",
    collection_name="knowledge_base",
    query_texts=["–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å", "–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è"],
    n_results=5,
    preferred_model="qwen2.5:3b"
)
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```python
# –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
health = await manager.get_system_health()
print(f"CPU: {health.cpu_usage}%")
print(f"Memory: {health.memory_usage}%")

# –ú–µ—Ç—Ä–∏–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
metrics = manager.get_optimization_metrics()
print(f"–°–∫–æ—Ä –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏: {metrics.optimization_score:.2f}")
print(f"Hit rate –∫–µ—à–∞: {metrics.cache_hit_rate:.2f}")
```

## üåê API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
```bash
GET /api/v1/optimization/health
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
```bash
GET /api/v1/optimization/metrics
```

#### –ó–∞–ø—É—Å–∫ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
```bash
POST /api/v1/optimization/optimize
```

#### –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞
```bash
POST /api/v1/optimization/process
{
    "prompt": "–ê–Ω–∞–ª–∏–∑ —Å–∏—Å—Ç–µ–º—ã",
    "context": "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç",
    "collection_name": "knowledge_base",
    "query_texts": ["–∞–Ω–∞–ª–∏–∑", "—Å–∏—Å—Ç–µ–º–∞"],
    "n_results": 5
}
```

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —É—Ä–æ–≤–Ω—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
POST /api/v1/optimization/config/level
{
    "level": "advanced"
}

# –í–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
POST /api/v1/optimization/config/auto-optimize
{
    "enabled": true
}
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–µ—à–∞–º–∏

```bash
# –°—Ç–∞—Ç—É—Å –∫–µ—à–µ–π
GET /api/v1/optimization/cache/status

# –û—á–∏—Å—Ç–∫–∞ –∫–µ—à–µ–π
POST /api/v1/optimization/cache/clear
```

### –û—Ç—á–µ—Ç—ã –æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```bash
# –î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç
GET /api/v1/optimization/performance/report
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
cd backend
python test_optimizations.py
```

### –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

1. **–¢–µ—Å—Ç —Ä–æ—É—Ç–µ—Ä–∞ –º–æ–¥–µ–ª–µ–π** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–±–æ—Ä–∞ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏
2. **–¢–µ—Å—Ç ChromaDB** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
3. **–¢–µ—Å—Ç –º–µ–Ω–µ–¥–∂–µ—Ä–∞** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
4. **–¢–µ—Å—Ç API** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
5. **–ë–µ–Ω—á–º–∞—Ä–∫** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

- **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞** - —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- **Hit rate –∫–µ—à–∞** - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
- **–£—Ç–∏–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π** - —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–µ—Å—É—Ä—Å–æ–≤** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU –∏ –ø–∞–º—è—Ç–∏

### –ê–ª–µ—Ä—Ç—ã

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∞–ª–µ—Ä—Ç—ã –ø—Ä–∏:

- –í—ã—Å–æ–∫–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ CPU (> 80%)
- –í—ã—Å–æ–∫–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ø–∞–º—è—Ç–∏ (> 85%)
- –ù–∏–∑–∫–æ–º hit rate –∫–µ—à–∞ (< 50%)
- –í—ã—Å–æ–∫–æ–º —É—Ä–æ–≤–Ω–µ –æ—à–∏–±–æ–∫ (> 10%)

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# ChromaDB
CHROMADB_PERSIST_DIR=./chroma_db
CHROMADB_REDIS_URL=redis://localhost:6379

# Ollama
OLLAMA_BASE_URL=http://localhost:11434

# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
OPTIMIZATION_LEVEL=advanced
AUTO_OPTIMIZE=true
OPTIMIZATION_INTERVAL=300
```

### Docker Compose

```yaml
version: '3.8'
services:
  redis:
    image: redis:alpine
    ports:
      - "6379:6379"
    
  ollama:
    image: ollama/ollama
    ports:
      - "11434:11434"
    volumes:
      - ollama_data:/root/.ollama
      
  backend:
    build: .
    environment:
      - CHROMADB_REDIS_URL=redis://redis:6379
      - OLLAMA_BASE_URL=http://ollama:11434
      - OPTIMIZATION_LEVEL=advanced
    depends_on:
      - redis
      - ollama

volumes:
  ollama_data:
```

## üöÄ –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. –í—ã–±–æ—Ä —É—Ä–æ–≤–Ω—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

- **BASIC** - –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **STANDARD** - –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
- **ADVANCED** - –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
- **EXPERT** - –¥–ª—è –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

```python
# –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
service = AdvancedChromaDBService(
    max_cache_size=5000,  # –ë–æ–ª—å—à–µ –∫–µ—à –¥–ª—è –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏
    enable_compression=True,
    enable_sharding=True,
    shard_size_threshold=25000  # –ú–µ–Ω—å—à–∏–π –ø–æ—Ä–æ–≥ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏—è
)
```

### 3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```python
# –†–µ–≥—É–ª—è—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∏–∫
async def monitor_performance():
    while True:
        metrics = manager.get_optimization_metrics()
        if metrics.optimization_score < 0.7:
            await manager.optimize_system()
        await asyncio.sleep(300)
```

### 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```python
try:
    result = await manager.process_request(prompt="–ó–∞–ø—Ä–æ—Å")
except Exception as e:
    # Fallback –∫ –±–∞–∑–æ–≤–æ–π –º–æ–¥–µ–ª–∏
    result = await manager.model_router.route_request(
        prompt="–ó–∞–ø—Ä–æ—Å",
        preferred_model="qwen2.5:0.5b"
    )
```

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–ú–µ–¥–ª–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Ollama
   - –£–≤–µ–ª–∏—á—å—Ç–µ —Ä–∞–∑–º–µ—Ä –∫–µ—à–∞
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Ä–æ–≤–µ–Ω—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

2. **–í—ã—Å–æ–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏**
   - –£–º–µ–Ω—å—à–∏—Ç–µ —Ä–∞–∑–º–µ—Ä –∫–µ—à–∞
   - –í–∫–ª—é—á–∏—Ç–µ –∫–æ–º–ø—Ä–µ—Å—Å–∏—é
   - –û—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à–∏

3. **–û—à–∏–±–∫–∏ ChromaDB**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Redis
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
   - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å

### –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞

```python
import logging

# –í–∫–ª—é—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(level=logging.DEBUG)

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
logging.getLogger('app.llm.intelligent_model_router').setLevel(logging.DEBUG)
logging.getLogger('app.llm.advanced_chromadb_service').setLevel(logging.DEBUG)
```

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

- **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞**: 2-30 —Å–µ–∫—É–Ω–¥ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –º–æ–¥–µ–ª–∏
- **Hit rate –∫–µ—à–∞**: 70-90% –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏**: 1-16 GB –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –º–æ–¥–µ–ª–µ–π
- **–ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å**: 10-100 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è Apple Silicon

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç—Å—è –¥–ª—è Apple Silicon:

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ GPU —Å–ª–æ–µ–≤ (35 —Å–ª–æ–µ–≤)
- –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ CPU –ø–æ—Ç–æ–∫–æ–≤
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ –º–∏–≥—Ä–∞—Ü–∏–∏

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```python
# –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
await manager.set_optimization_level(OptimizationLevel.EXPERT)

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
manager.optimization_interval = 600  # 10 –º–∏–Ω—É—Ç
```

### –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

```python
# –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö ChromaDB
await service.export_collection("old_collection", "backup.json")

# –ò–º–ø–æ—Ä—Ç –≤ –Ω–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É
await service.import_collection("new_collection", "backup.json")
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã: `python test_optimizations.py`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤: `GET /api/v1/optimization/health`
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API: `GET /docs`

---

**üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!** –í—ã —É—Å–ø–µ—à–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏–ª–∏ —Å–∏—Å—Ç–µ–º—É –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π reLink. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤. 